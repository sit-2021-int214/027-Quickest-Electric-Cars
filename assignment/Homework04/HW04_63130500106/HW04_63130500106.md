# R-Assignment 4

**Created by Name-Surname (ID: 63130500106)**

Choose Dataset:
* Superstore Sales Dataset (Data from Rohit Sahoo,[Kaggle](https://www.kaggle.com/rohitsahoo/sales-forecasting)) >> [Using CSV](https://raw.githubusercontent.com/safesit23/INT214-Statistics/main/datasets/superstore_sales.csv)
* [Data in csv (in my github repository)](train.csv)


### Outlines
1. Explore the dataset
2. Learning function from Tidyverse
3. Transform data with dplyr and finding insight the data
4. Visualization with ggplot2

## Part 1: Explore the dataset
ใน dataset นี้ เป็นชุดข้อมูลเกี่ยวกับการค้าปลีกของ Superstore ระดับโลกเป็นเวลา 4 ปี เพื่อใช้คาดการณ์ยอดขายในอีก 7 วันข้างหน้าจากวันสุดท้ายของชุดข้อมูล และใช้เป็นประโยชน์ในเชิงข้อมูลเศรษฐกิจ ข้อมูลสภาพอากาศ ราคาหุ้น และการพยากรณ์ยอดขายปลีก

```
# Import library
library(DescTools)  #exploring data
library(readr)      #read .csv file
library(stringr)    #data cleaning and data transformation
library(dplyr)      #for %>% uses
library(ggplot2)    #use plot graph

#Import dataset
Orders <- read_csv("https://raw.githubusercontent.com/sit-2021-int214/027-Quickest-Electric-Cars/main/assignment/Homework04/HW04_63130500106/train.csv")

#Explore dataset
View(Orders)
glimpse(Orders)
```
ใน dataset นี้ เป็นชุดข้อมูลที่เข้าใจง่ายและมีข้อมูลที่ค่อนข้างจะสมบูรณ์มาก ไม่มีข้อมูลไหนตกลงหายไปในแต่ละแถว
แต่จะพบว่ามีจำนวนข้อมูลทั้งหมด 9,800 rows และมีทั้งหมด 18 columns ได้แก่
| |Column Name|Column's detail|Data type|
|----|------|-------|----|
|1|Row ID|เลขที่ของแถว|double|
|2|Order ID|เลขที่ของใบสั่งซื้อ|character|
|3|Order Date|วันที่ของใบสั่งซื้อ|character|
|4|Ship Date|วันที่จัดสั่ง|character|
|5|Ship Mode|รูปแบบการจัดส่ง(เช่น First Class,Second Class,Standard Class)|character|
|6|Customer ID|รหัสประจำตัวของลูกค้า|character|
|7|Customer Name|ชื่อลูกค้า|character|
|8|Segment|ประเภทของลูกค้าประเภทของลูกค้าที่สั่งซื้อ(เช่น Consumer,Corporate,Home Offices)|character|
|9|Country|ประเทศที่ลูกค้าอาศัยอยู่|character|
|10|City|เมืองที่ลูกค้าอาศัยอยู่|character|
|11|State|รัฐที่ลูกค้าอาศัยอยู่|character|
|12|Postal Code|รหัสไปรษณีย์|double|
|13|Region|ภูมิภาค|character|
|14|Product ID|รหัสของสินค้า|character|
|15|Category|ประเภทของสินค้า(เช่น Furniture,Technology,Office Supplies)|character|
|16|Sub-Category|หมวดหมู่ย่อยของสินค้า|character|
|17|Product Name|ชื่อสินค้า|character|
|18|Sales|ราคาที่สั่งซื้อ|double|

## Part 2: Learning function from Tidyverse
Tidyverse มี package ดังนี้
- `readr`
- `tidyr`
- `dplyr`
- `tibble`
- `ggplot2`
- อื่นๆ

//Example function and syntax
- Package `readr`
    - `read_csv()` : ใช้อ่านไฟล์ .csv
```
#Import dataset
Orders <- read_csv("https://raw.githubusercontent.com/sit-2021-int214/027-Quickest-Electric-Cars/main/assignment/Homework04/HW04_63130500106/train.csv")
```
- Package `dplyr`
    - `select()` : ใช้เลือก column
```
Orders %>% select(`Product ID`,Category,`Sub-Category`,`Product Name`) 
```

#`glimpse()` : ดูภาพรวมของข้อมูลเบื้องต้น เช่น จำนวนข้อมูล, ชื่อ column, data type, ต้วอย่างข้อมูลแต่ละ column
```
glimpse(Orders)  
```

- `count()` : นับจำนวนข้อมูล
```
Orders %>% count()
Orders %>% count(Segment=="Consumer")
```

- `filter()` : ใช้คัดเลือกข้อมูลเฉพาะบาง row
```
Orders %>% filter(`Ship Mode`=="First Class")
```

- `arrange()` : เรียงลำดับข้อมูลใน column
```
Orders %>% arrange(Sales) #เรียงตามราคา จากน้อยไปมาก
Orders<-Orders %>% arrange(desc(Sales)) #เรียงตามราคา จากมากไปน้อย
```

- `group_by()` : จัดกลุ่มข้อมูล
- `group_keys()` : ดูชื่อของแต่ละกลุ่ม
- `tally()` : นับจำนวนข้อมูลของแต่ละกลุ่ม
```
Orders %>% group_by(Region) %>% group_keys()
Orders %>% group_by(Region) %>% tally(sort = TRUE)
```

- `distinct()` : ตัดข้อมูลที่ซ้ำกันออก
```
Orders %>% select(`Customer Name`,Country,City,State) %>% distinct()
```

- `rename()` : เปลี่ยนชื่อ column
```
Orders %>% rename("TotalPrice" = Sales)
```

- `sumerise()`
```
  
```
## Part 3: Transform data with dplyr and finding insight the data
1. ประเทศใดมีการสั่งซื้อมากที่สุดในชุดข้อมูลนี้ 
```
Orders$Country<-as.factor(Orders$Country)
summary(Orders$Country)
```

Result:
```
United States 
         9800
```
//Explain
- มีแค่ประเทศสหรัฐอเมริกาประเทศเดียวที่มีข้อมูลในชุดข้อมูลนี้
-------

2. เลือกดูข้อมูลที่เกี่ยวกับสินค้าทั้งหมดที่เคยถูกสั่งซื้อในชุดข้อมูลนี้ พร้อมตัดข้อมูลที่ซ้ำกันออก
```
Orders %>% select(`Product ID`,Category,`Sub-Category`,`Product Name`) %>% distinct()
```

Result:
```
# A tibble: 1,893 x 4
   `Product ID`    Category        `Sub-Category` `Product Name`                                                  
   <chr>           <fct>           <fct>          <chr>                                                           
 1 FUR-BO-10001798 Furniture       Bookcases      Bush Somerset Collection Bookcase                               
 2 FUR-CH-10000454 Furniture       Chairs         Hon Deluxe Fabric Upholstered Stacking Chairs, Rounded Back     
 3 OFF-LA-10000240 Office Supplies Labels         Self-Adhesive Address Labels for Typewriters by Universal       
 4 FUR-TA-10000577 Furniture       Tables         Bretford CR4500 Series Slim Rectangular Table                   
 5 OFF-ST-10000760 Office Supplies Storage        Eldon Fold 'N Roll Cart System                                  
 6 FUR-FU-10001487 Furniture       Furnishings    Eldon Expressions Wood and Plastic Desk Accessories, Cherry Wood
 7 OFF-AR-10002833 Office Supplies Art            Newell 322                                                      
 8 TEC-PH-10002275 Technology      Phones         Mitel 5320 IP Phone VoIP phone                                  
 9 OFF-BI-10003910 Office Supplies Binders        DXL Angle-View Binders with Locking Rings by Samsill            
10 OFF-AP-10002892 Office Supplies Appliances     Belkin F5C206VTEL 6 Outlet Surge                                
# ... with 1,883 more rows
```
//Explain
- สินค้าที่เคยถูกสั่งซื้อทั้งหมดมีจำนวน 1,893 ชิ้น
-------

3. จัดอันดับยอดรวมราคาสั่งซื้อของแต่ละภูมิภาค ว่าภูมิภาคใดมียอดรวมราคาสั่งซื้อมากที่สุด(เรียงข้อมูลจากมากไปน้อย)
```
Orders %>% group_by(Region) %>% select(Region,Sales) %>% summarise(Sum_price = sum(Sales)) %>% arrange(desc(Sum_price))
```

Result:
```
# A tibble: 4 x 2
  Region  Sum_price
  <fct>       <dbl>
1 West      710220.
2 East      669519.
3 Central   492647.
4 South     389151.
```

//Explain
- อันดับ 1 : ภาคตะวันตกของประเทศสหรัฐมียอดรวมราคาสั่งซื้อมากที่สุด คือ 710,220 ดอลลาร์สหรัฐ
- อันดับ 2 : ภาคตะวันออกของประเทศสหรัฐมียอดรวมราคาสั่งซื้อ 669,519 ดอลลาร์สหรัฐ
- อันดับ 3 : ภาคกลางของประเทศสหรัฐมียอดรวมราคาสั่งซื้อ 492,647 ดอลลาร์สหรัฐ
- อันดับ 4 : ภาคใต้ออกของประเทศสหรัฐมียอดรวมราคาสั่งซื้อ 389,151 ดอลลาร์สหรัฐ
-------

4. ลูกค้าคนใดมีการสั่งซื้อสินค้าแบบ First Class บ่อยที่สุด
```
Orders %>% filter(`Ship Mode`=="First Class") %>% group_by(`Customer Name`) %>% tally(sort = TRUE)
```

Result:
```
# A tibble: 490 x 2
   `Customer Name`     n
   <chr>           <int>
 1 Clytie Kelty       14
 2 Dean percer        13
 3 Kelly Lampkin      11
 4 Matt Connell       10
 5 Naresj Patel       10
 6 Pamela Stobb       10
 7 Adam Hart           9
 8 Adrian Hane         9
 9 Darrin Sayre        9
10 Erin Smith          9
# ... with 480 more rows
```
//Explain
- Clytie Kelty เป็นลูกค้าที่มีการสั่งซื้อสินค้าแบบ First Class บ่อยที่สุด 
-------

5. 
```

```

Result:
```

```
//Explain
- 

## Part 4: Visualization with GGplot2
### 1.) Graph show relation between height and mass
```
scat_plot <- starwars %>% filter(mass<500) %>% ggplot(aes(x=height,y=mass))+
  geom_point(aes(color=gender))

scat_plot+geom_smooth()
```
Result:

![Graph 1](graph1.png)

**Guideline:
Embed Image by using this syntax in markdown file
````
![Name](imageFile)
````
